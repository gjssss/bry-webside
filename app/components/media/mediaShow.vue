<script setup lang="tsx">
import dayjs from 'dayjs'

const scrollElem = ref()
const group1 = {
  avator: '/images/departments/media/avatar-purple-monster.svg',
  name: 'You',
  time: '05:04 PM',
  messages: [
    {
      render: <>æ–°åª’ä½“ç»„å¥½é…·å•Šï¼å¥½æƒ³åŠ ï¼ï¼â¤</>,
    },
  ],
}
const group2 = {
  avator: '/images/departments/media/avatar-blue-cutie.svg',
  name: 'æ–°åª’ä½“ç»„æŸä¸çŸ¥åæˆå‘˜å£¹',
  time: '05:06 PM',
  messages: [
    {
      render: <>Hiï¼Œæ¬¢è¿æ¥åˆ°æœ‰è¶£çµé­‚èšé›†åœ°æ–°åª’ä½“ç»„ï¼ æˆ‘ä»¬æ˜¯â€”â€”</>,
    },
    {
      render: <>ï¼ƒç”Ÿæ´»è§‚å¯Ÿå‘˜ï¼ƒ</>,
    },
    {
      render:
      <>
        <p>åœ¨è¿™é‡Œï¼Œä¸ä½ åŒè¡Œï¼Œå†™ä½ æ‰€æƒ³ã€‚</p>
        <p>
          æˆ‘ä»¬é©»å®ˆåœ¨å®˜æ–¹æ–°åª’ä½“å¹³å°ï¼Œæ•æ‰æ ¡å›­ç”Ÿæ´»ä¸­çš„å°ç¡®å¹¸ã€å°ç¾å¥½ï¼Œä»¥å›¾æ–‡å®šæ ¼åŒ—é‚®äººçš„ç‹¬å®¶è®°å¿†ã€‚
        </p>
      </>,
    },
    {
      render: (
        <div class="w-full flex justify-between">
          <div>
            <div class="msg-title-bg w-fit">
              <div class="relative w-fit">#æ˜¥æ—¥é‚®å•Šé‚®ï¼š</div>
            </div>
            <div><a class="underline" href="#">è—åœ¨åŒ—ä¸‰ç¯é‡Œçš„å°ä¼—å®è—æ‰“å¡åœ°</a></div>
            <div><a class="underline" href="#">åŒ—å…­ç¯çº¦ä¼šåœ£åœ°ï¼ŒåŸåŒº40minå¯è¾¾</a></div>
            <div><a class="underline" href="#">æ˜¥æ—¥é‚®èŠ±å›¾é‰´</a></div>
          </div>
          <div>
            <div class="msg-title-bg w-fit">
              <div class="relative w-fit">#åŒ—é‚®çˆ±æƒ…æ•…äº‹ï¼š</div>
            </div>
            <div><a class="underline" href="#">BYRä¸ƒå¤•ä¸è§„åˆ™è®¿è°ˆ</a></div>
            <div><a class="underline" href="#">BYR520çº¦ä¼šæ–¹å¼ä¸€è§ˆ</a></div>
          </div>
        </div>
      ),
      props: {
        full: true,
      },
    },
  ],
}

const group3 = {
  avator: '/images/departments/media/avatar-dinosaur.svg',
  name: 'æ–°åª’ä½“ç»„æŸä¸çŸ¥åæˆå‘˜è´°',
  time: '05:12 PM',
  messages: [
    {
      render: <>æˆ‘ä»¬ä¹Ÿæ˜¯â€”â€”</>,
    },
    {
      render: <>ï¼ƒæµªæ¼«çš„å¹»æƒ³å®¶ï¼ƒ</>,
    },
    {
      render:
      <>
        <p>åœ¨è¿™é‡Œï¼Œæ¢¦å¢ƒç¢°æ’ç°å®ï¼Œä¸€åˆ‡çš†æœ‰å¯èƒ½ã€‚</p>
        <p>æˆ‘ä»¬ç‚¹ç‡ƒçµæ„Ÿçš„ç„°ç«ï¼Œå°†å¤©é©¬è¡Œç©ºçš„è„‘æ´ä»˜è¯¸ç¬”ä¸‹ï¼Œæ‘˜æ˜Ÿæ½æœˆã€é€å…‰ç»‡æ¢¦ã€‚</p>
      </>,
    },
    {
      render:
      <>
        <p><a class="underline">ä¸–ç•Œç ´ç ´çƒ‚çƒ‚ï¼Œå°åŠ¨ç‰©ç¼ç¼è¡¥è¡¥</a></p>
        <p><a class="underline">è¶…èƒ½åŠ›ä¸å‰¯ä½œç”¨çš„åŒ–å­¦ååº”</a></p>
      </>,
    },
  ],
}
const group4 = ref()
const text = ref()
function sendMsg() {
  if (group4.value) {
    group4.value.messages.push({
      render: <>{text.value}</>,
    })
  }
  else {
    group4.value = {
      avator: '/images/departments/media/avatar-purple-monster.svg',
      name: 'You',
      time: dayjs().format('hh:mm A'),
      messages: [
        {
          render: <>{text.value}</>,
        },
      ],
    }
  }
  text.value = ''
  scrollElem.value.scrollTop = scrollElem.value.scrollHeight
}
</script>

<template>
  <div class="h-full flex flex-col of-hidden b b-#E5E7EB rounded-20px b-solid">
    <div class="h-75px flex items-center justify-between b-b b-#E5E7EB b-solid bg-#F6F8FC p-4 tracking-widest">
      <div class="text-2xl c-#333">
        ğŸ‰æ‹›æ–°å•¦ğŸ‰
      </div>
    </div>
    <div ref="scrollElem" class="hide-scroll h-400px of-auto p-4">
      <div class="media-bg flex flex-col gap-20px">
        <MediaMsgGroup :group="group1" direction="right" />
        <div class="w-full text-center c-gray-5">
          åŒ—é‚®äººå›¢é˜Ÿ æ–°åª’ä½“ç»„ æ‹äº†æ‹ ä½ ï¼Œå¹¶å‘é€äº†ä¸€æ¡åŠ ç¾¤é‚€è¯·
        </div>
        <MediaMsgGroup :group="group2" direction="left" />
        <MediaMsgGroup :group="group3" direction="left" />
        <MediaMsgGroup v-if="group4" :group="group4" direction="right" />
        <div class="h-50px w-full" />
      </div>
    </div>
    <div class="flex-1 b-t b-#E5E7EB b-solid p-4">
      <div class="h-full w-full flex items-center gap-20px rounded-full bg-#f6f8fc px-11 py-3">
        <img class="cursor-pointer" src="/images/departments/media/icon-pin.svg">
        <div class="h-full w-2px bg-gray-2" />
        <input
          v-model="text"
          type="text"
          class="flex-1 bg-transparent outline-none"
          placeholder="è¯·è¾“å…¥..."
          @keypress.enter="sendMsg"
        >
        <img class="cursor-pointer" src="/images/departments/media/icon-smile.svg">
        <img class="cursor-pointer" src="/images/departments/media/icon-photo.svg">
        <img class="cursor-pointer" src="/images/departments/media/icon-location.svg">
      </div>
    </div>
  </div>
</template>

<style>
.media-bg {
  background-image: url('/images/departments/media/star-bg.svg');
}
</style>
